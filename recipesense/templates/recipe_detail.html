{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Recipes | RecipeSense</title>
    <link rel="stylesheet" href="{% static 'css/recipe_detail.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <!-- TOP NAVIGATION -->
    <header class="topbar">
        <a href="{% url 'app:index' %}" class="logo-link" aria-label="RecipeSense Home">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="logo-svg" fill="none"
                stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">

                <path d="M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041
             a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0
             4 4 0 0 0-2.134 7.588c.411.198.727.585.727
             1.041V20a1 1 0 0 0 1 1Z" />
                <path d="M6 17h12" />
            </svg>

            <span class="logo-text">
                Recipe<span>Sense</span>
            </span>
        </a>

        <nav>
            <a href="{% url 'app:recipe_detail' %}">Find Recipes</a>
            <a href="{% url 'app:favorites' %}">â¤ï¸ Favorites</a>
            <a href="{% url 'app:recently_viewed' %}">ğŸ•’ Recently Viewed</a>
            <a href="{% url 'app:login' %}">Sign In</a>
            <a href="{% url 'app:signup' %}" class="btn-primary">Get Started</a>
        </nav>
    </header>

    <form method="GET" class="search-form">

        <!-- HERO SEARCH -->
        <section class="hero">
            <h1>What's in Your Kitchen?</h1>
            <p>Enter your ingredients and discover delicious recipes you can make</p>

            <div class="search-bar">
                <input type="text" name="ingredients" placeholder="e.g. chicken, tomato, garlic"
                    value="{{ ingredients }}" required>
                <button type="submit" class="btn primary">
                    ğŸ” Find Recipes
                </button>
            </div>
        </section>

        <!-- MAIN CONTENT -->
        <main class="content">

            <!-- FILTERS -->
            <aside class="filters">
                <h3>ğŸ› Filters</h3>

                <label>Diet Preference</label>
                <select name="diet">
                    <option value="">Any</option>
                    <option value="vegetarian">Vegetarian</option>
                    <option value="vegan">Vegan</option>
                    <option value="gluten free">Gluten Free</option>
                    <option value="ketogenic">Ketogenic</option>
                    <option value="paleo">Paleo</option>
                </select>

                <label>Max Prep Time</label>
                <select name="time">
                    <option value="">Any</option>
                    <option value="15">15 minutes</option>
                    <option value="30">30 minutes</option>
                    <option value="60">1 hour</option>
                    <option value="120">2+ hours</option>
                </select>

                <button type="submit" class="apply-filters">
                    Apply Filters
                </button>
            </aside>

            <!-- RESULTS -->
            {% if recipes %}
            <div class="recipes-grid">
                {% for recipe in recipes %}
                {% if user.is_authenticated %}
                <a href="{% url 'app:single_recipe' recipe.id %}" class="recipe-card">
                    {% else %}
                    <a href="{% url 'app:signup' %}?next={% url 'app:single_recipe' recipe.id %}" class="recipe-card">
                        {% endif %}
                        <div class="recipe-image">
                            {% if recipe.image %}
                            <img src="{{ recipe.image }}" alt="{{ recipe.title }}">
                            {% else %}
                            <div class="image-placeholder">ğŸ½ï¸</div>
                            {% endif %}

                            {% if api_error %}
                            <div class="api-error">
                                âš ï¸ {{ api_error }}
                            </div>
                            {% endif %}
                        </div>


                        <div class="recipe-info">
                            <h3>{{ recipe.title }}</h3>
                            <p>â± {{ recipe.readyInMinutes }} min</p>

                            <div class="match-info">
                                <span class="matched">âœ… {{ recipe.usedIngredientCount }} matched</span>
                                <span class="missing">âŒ {{ recipe.missedIngredientCount }} missing</span>
                            </div>
                        </div>

                    </a>
                    {% endfor %}
            </div>
            {% else %}
            <div class="empty-state-wrapper">
                <div class="empty-state">
                    <div class="empty-icon">ğŸ‘¨â€ğŸ³</div>
                    <h2>No recipes found</h2>
                    <p>Try different ingredients or filters</p>
                </div>
            </div>
            {% endif %}

        </main>
    </form>


    <script>
        window.addEventListener("offline", () => {
            alert("âš ï¸ You are offline. Showing saved recipes only.");
        });
    </script>


    <!-- HEALTHY RECIPES SECTION -->
    <section class="healthy-section">
        <div class="healthy-container">

            <h2 class="healthy-title">Healthy Recipes</h2>
            <p class="healthy-desc">
                Healthy, delicious recipes, including quick dinner, easy lunch ideas, snacks,
                breakfast, soup and more, inspired by food & nutrition experts.
            </p>

            <div class="healthy-grid">
                <a href="{% url 'app:category_recipes' 'appetizer' %}" class="healthy-card">
                    ğŸ¥— Healthy Appetizer Recipes
                </a>

                <a href="{% url 'app:category_recipes' 'side-dish' %}" class="healthy-card">
                    ğŸ½ Healthy Side Dish Recipes
                </a>

                <a href="{% url 'app:category_recipes' 'soup' %}" class="healthy-card">
                    ğŸ² Healthy Soup Recipes
                </a>

                <a href="{% url 'app:category_recipes' 'salad' %}" class="healthy-card">
                    ğŸ¥¬ Healthy Salad Recipes
                </a>

                <a href="{% url 'app:category_recipes' 'drink' %}" class="healthy-card">
                    ğŸ¥¤ Healthy Drink Recipes
                </a>

                <a href="{% url 'app:category_recipes' 'dessert' %}" class="healthy-card">
                    ğŸª Healthy Cookie & Dessert Recipes
                </a>

                <a href="{% url 'app:category_recipes' 'weight-loss' %}" class="healthy-card">
                    âš–ï¸ Recipes for Weight Loss & Diet
                </a>

                <a href="{% url 'app:category_recipes' 'kids' %}" class="healthy-card">
                    ğŸ§’ Healthy Kids Recipes
                </a>

                <a href="{% url 'app:category_recipes' 'heritage' %}" class="healthy-card">
                    ğŸº Heritage Cooking
                </a>

                <a href="{% url 'app:category_recipes' 'sauce' %}" class="healthy-card">
                    ğŸ§‚ Healthy Sauce & Condiment Recipes
                </a>
            </div>




            <!-- MEALS & COURSES SECTION -->
            <div style="margin-top: 80px;">

                <h2 class="healthy-title">Meals & Courses</h2>
                <p class="healthy-desc">
                    Browse recipes by meal time and course
                </p>

                <div class="healthy-grid">

                    <a href="{% url 'app:category_recipes' 'breakfast' %}" class="healthy-card">
                        ğŸ³ Breakfast Recipes
                    </a>

                    <a href="{% url 'app:category_recipes' 'brunch' %}" class="healthy-card">
                        ğŸ¥ Brunch Recipes
                    </a>

                    <a href="{% url 'app:category_recipes' 'lunch' %}" class="healthy-card">
                        ğŸ¥— Lunch Recipes
                    </a>

                    <a href="{% url 'app:category_recipes' 'dinner' %}" class="healthy-card">
                        ğŸ½ Dinner Recipes
                    </a>

                    <a href="{% url 'app:category_recipes' 'dessert' %}" class="healthy-card">
                        ğŸ° Dessert Recipes
                    </a>

                </div>
            </div>



        </div>
    </section>



</body>

</html>